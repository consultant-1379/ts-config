tags:
  eric-cces-ngac: false

eric-log-shipper:
  enabled: false
eric-udm-mesh-integration:
  eric-ingressgw-nef-nbi-non-trust-traffic:
    resources:
      istio-proxy:
        requests:
          cpu: 600m
          memory: 512Mi
    service:
      externalIPv4:
        annotations:
          # Shared VIP label of annotations for ipv4 nef nbi non-trust traffic ingress gateway, works while external ipv4 enabled.
          # The value provided is used to configure annotation "metallb.universe.tf/allow-shared-ip" for service mesh nbi non-trust traffic ingress gateway.
          # If need share VIP with any other service, please enable it and keep setting the same field value with that service.
          # sharedVIPLabel: ""
          addressPoolName: cces{{ instance }}-5g-nbi-non-trust-traffic
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
      externalIPv6:
        annotations:
          # Shared VIP label of annotations for ipv6 nef nbi non-trust traffic ingress gateway, works while external ipv6 enabled.
          # The value provided is used to configure annotation "metallb.universe.tf/allow-shared-ip" for service mesh nbi non-trust traffic ingress gateway.
          # If need share VIP with any other service, please enable it and keep setting the same field value with that service.
          # sharedVIPLabel: ""
          addressPoolName: cces{{ instance }}-5g-nbi-non-trust-traffic
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
    ports:
      default:
        name: https
        port: 443
        targetPort: 8443
  eric-ingressgw-nef-nbi-trust-traffic:
    resources:
      istio-proxy:
        requests:
          cpu: 600m
          memory: 512Mi
    service:
      externalIPv4:
        annotations:
          # Shared VIP label of annotations for ipv4 nef nbi trust traffic ingress gateway, works while external ipv4 enabled.
          # The value provided is used to configure annotation "metallb.universe.tf/allow-shared-ip" for service mesh nbi trust traffic ingress gateway.
          # If need share VIP with any other service, please enable it and keep setting the same field value with that service.
          # sharedVIPLabel: ""
          addressPoolName: cces{{ instance }}-5g-nbi-trust-traffic
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
      externalIPv6:
        annotations:
          # Shared VIP label of annotations for ipv6 nef nbi trust traffic ingress gateway, works while external ipv6 enabled.
          # The value provided is used to configure annotation "metallb.universe.tf/allow-shared-ip" for service mesh nbi trust traffic ingress gateway.
          # If need share VIP with any other service, please enable it and keep setting the same field value with that service.
          # sharedVIPLabel: ""
          addressPoolName: cces{{ instance }}-5g-nbi-trust-traffic
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
    ports:
      default:
        name: https
        port: 443
        targetPort: 8443
  eric-ingressgw-nef-provisioning-traffic:
    resources:
      istio-proxy:
        requests:
          cpu: 100m
          memory: 512Mi
    service:
      externalIPv4:
        annotations:
          addressPoolName: cces{{ instance }}-5g-prov
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
      externalIPv6:
        annotations:
          addressPoolName: cces{{ instance }}-5g-prov
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
    ports:
      default:
        name: https
        port: 443
        targetPort: 8443
  eric-ingressgw-nef-sbi-traffic:
    resources:
      istio-proxy:
        requests:
          cpu: 150m
          memory: 512Mi
    service:
      externalIPv4:
        annotations:
          addressPoolName: cces{{ instance }}-5g-sbi-traffic
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
      externalIPv6:
        annotations:
          addressPoolName: cces{{ instance }}-5g-sbi-traffic
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
    ports:
      default:
        name: https
        port: 443
        targetPort: 8443
  eric-ingressgw-nef-oam-traffic:
    service:
      externalIPv4:
        annotations:
          sharedVIPLabel: cces-oam
          addressPoolName: cces{{ instance }}-oam
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
      externalIPv6:
        annotations:
          sharedVIPLabel: cces-oam
          addressPoolName: cces{{ instance }}-oam
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
    ports:
      default:
        name: https
        port: 2443
        targetPort: 8443
  eric-ingressgw-cces-nbi-heartbeat-traffic:
    #  Northbound interface heartbeat gateway related configurations for CCES liveness detection
    #  The default value of enabled field is true. Set true only when
    #      - There's a need to check whether CCES site is available with liveness detection.
    enabled: true
    resources:
      istio-proxy:
        requests:
          cpu: 100m
          memory: 256Mi
          ephemeral-storage:
        limits:
          cpu: 500m
          memory: 1024Mi
          ephemeral-storage:
    externalTrafficPolicy: Cluster
    service:
      type: LoadBalancer
      externalIPv4:
        annotations:
          # Shared VIP label of annotations for ipv4 nef nbi heartbeat traffic ingress gateway, works while external ipv4 enabled.
          # The value provided is used to configure annotation "metallb.universe.tf/allow-shared-ip" for service mesh nbi heartbeat traffic ingress gateway.
          # If need share VIP with any other service, please enable it and keep setting the same field value with that service.
          # sharedVIPLabel: ""
          addressPoolName: cces{{ instance }}-nbi-heartbeat-traffic
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
      externalIPv6:
        annotations:
          # Shared VIP label of annotations for ipv6 nef nbi heartbeat traffic ingress gateway, works while external ipv6 enabled.
          # The value provided is used to configure annotation "metallb.universe.tf/allow-shared-ip" for service mesh nbi heartbeat traffic ingress gateway.
          # If need share VIP with any other service, please enable it and keep setting the same field value with that service.
          # sharedVIPLabel: ""
          addressPoolName: cces{{ instance }}-nbi-heartbeat-traffic
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
    ports:
      default:
        name: https
        port: 443
        targetPort: 8443
  eric-ingressgw-cces-2nd-nbi-hb-traffic:
    #  Northbound interface heartbeat gateway related configurations for CCES liveness detection
    #  The default value of enabled field is false. Set true only when the other liveness detection request is from the second domain
    #  There's a need to check whether CCES site is available with liveness detection.
    enabled: false
    externalTrafficPolicy: Cluster
    service:
      type: LoadBalancer
      externalIPv4:
        annotations: {}
          # Shared VIP label of annotations for the second ipv4 nef nbi heartbeat traffic ingress gateway, works while external ipv4 enabled.
          # The value provided is used to configure annotation "metallb.universe.tf/allow-shared-ip" for service mesh nbi heartbeat traffic ingress gateway.
          # If need share VIP with any other service, please enable it and keep the same field value with that service.
          # sharedVIPLabel: ""
          # IPv4 address pool name of the Ingress gateway for CCES liveness detection, working while external IPv4 enabled.
          # There will be service downtime if this parameter is modified in running system.
          # addressPoolName: ""
          # cloudProviderLB:
            ## list of cloud provider annotations. Example AWS annotation
           # service.beta.kubernetes.io/aws-load-balancer-type: "external"
      externalIPv6:
        annotations: {}
          # Shared VIP label of annotations for the second ipv6 nef nbi heartbeat traffic ingress gateway, works while external ipv6 enabled.
          # The value provided is used to configure annotation "metallb.universe.tf/allow-shared-ip" for service mesh nbi heartbeat traffic ingress gateway.
          # If need share VIP with any other service, please enable it and keep the same field value with that service.
          # sharedVIPLabel: ""
          # IPv6 address pool name of the Ingress gateway for CCES liveness detection, working while external IPv6 enabled.
          # There will be service downtime if this parameter is modified in running system.
          # addressPoolName: ""
          # cloudProviderLB:
            ## list of cloud provider annotations. Example AWS annotation
           # service.beta.kubernetes.io/aws-load-balancer-type: "external"
    ports:
      default:
        name: https
        port: 443
        targetPort: 8443
  eric-ingressgw-cces-capif1-non-trust-traffic:
    enabled: false
    resources:
      istio-proxy:
        requests:
          cpu: 100m
          memory: 256Mi
          ephemeral-storage:
        limits:
          cpu: 500m
          memory: 1024Mi
          ephemeral-storage:
    externalTrafficPolicy: Cluster
    service:
      type: LoadBalancer
      annotations:
        addressPoolName: cces-5g-capif1-non-trust-traffic
        #cloudProviderLB:
          ##list of cloud provider annotations. Example AWS annotation
         #service.beta.kubernetes.io/aws-load-balancer-type: "external"
      externalIPv4:
        annotations:
          addressPoolName: cces-5g-capif1-non-trust-traffic
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
      externalIPv6:
        annotations:
          addressPoolName: cces-5g-capif1-non-trust-traffic
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
    ports:
      default:
        name: https-tls
        port: 8443
        targetPort: 8443
      default2:
        name: https-mtls
        port: 8444
        targetPort: 8444
  eric-ingressgw-cces-capif1-trust-traffic:
    enabled: false
    resources:
      istio-proxy:
        requests:
          cpu: 100m
          memory: 256Mi
          ephemeral-storage:
        limits:
          cpu: 500m
          memory: 1024Mi
          ephemeral-storage:
    externalTrafficPolicy: Cluster
    service:
      type: LoadBalancer
      annotations:
        addressPoolName: cces-5g-capif1-trust-traffic
        #cloudProviderLB:
          ##list of cloud provider annotations. Example AWS annotation
         #service.beta.kubernetes.io/aws-load-balancer-type: "external"
      externalIPv4:
        annotations:
          addressPoolName: cces-5g-capif1-trust-traffic
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
      externalIPv6:
        annotations:
          addressPoolName: cces-5g-capif1-trust-traffic
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
    ports:
      default:
        name: https-tls
        port: 8443
        targetPort: 8443
      default2:
        name: https-mtls
        port: 8444
        targetPort: 8444
  eric-mesh-controller:
    pilot:
      env:
        PILOT_ENABLE_INBOUND_PASSTHROUGH: false

global:
  tags:
    eric-cces-ngac: false
  externalIPv4:
    enabled: true
  externalIPv6:
    enabled: false
  internalIPFamily: IPv4
  {% if caas == 'OpenShift' %}
  fsGroup:
    namespace: true
  {% endif %}
  security:
    {% if caas == 'OpenShift' %}
    policyBinding:
      create: true
    policyReferenceMap:
      default-restricted-security-policy: default-restricted-security-policy
      default-service-mesh-security-policy: plc-privileged-for-istio
      plc-29c4b823c87a16cad810082eb11106: plc-29c4b823c87a16cad810082eb11106
      plc-dd66cc53d8554f93ad34971900932e: plc-dd66cc53d8554f93ad34971900932e-wa
      plc-59d0cf1dcc793a78b6ce30bfbe6553: plc-59d0cf1dcc793a78b6ce30bfbe6553
      plc-38dc0a0ee2b2564ef10039d2c6c0e0: plc-38dc0a0ee2b2564ef10039d2c6c0e0
      plc-privileged-for-istio: plc-privileged-for-istio
    {% endif %}
    tls:
      enabled: true
  multiTenancy:
    enabled: true
  timezone: {{ timezone }}
  ipStackMode: "'ipv4'"
  pullSecret: regcred
  registry:
    url: {{ registry.url }}
  tapagent:
    enabled: true
    pvtb:
      enabled: false
  logShipper:
    deployment:
      # Indicates which deployment type is chosen for log shipper service:
      #    daemonset: deplay as daemonset
      #    sidecar:   deplay as sidecar
      # default is daemonset
      type: "daemonset"
  log:
    # Indicates which streaming method is chosen by all services to write log records:
    #   indirect: stdout to infrastructure logging framework
    #   direct: - direct streaming to the Log Aggregator
    #   dual: -   stdout to infrastructure logging framework and direct streaming to Log Aggregator
    #   When global.logShipper.deployment.type is "daemonset", this value must be set to "indirect"
    #   When global.logShipper.deployment.type is "sidecar", this value must be set to "dual"
    streamingMethod: "indirect"
    # Indicates which output are chosen by all services to write log records, it will be deprecated and replaced by global.log.streamingMethod.
    #   stream:  direct streaming to the Log Aggregator
    #   stdout:  stdout to infrastructure logging framework
    #   applicationLevel: direct streaming to the Log Aggregator
    #   k8sLevel:stdout to infrastructure logging framework
    #   When global.logShipper.deployment.type is "daemonset", this value must be set to ["stdout","k8sLevel"]
    #   When global.logShipper.deployment.type is "sidecar", this value must be set to ["stream","stdout","applicationLevel","k8sLevel"]
    outputs: ["stdout", "k8sLevel"]
  cces:
    log:
      transaction:
        # Indicates transaction log should be supported or not. values: true/false
        enabled: false
        # direct: - direct streaming to the Log Aggregator. Only support the value: direct
        streamingMethod: direct
    eric-cces-charging:
      enabled: false
      rf:
        enabled: false
  eric-cces-commonsvc:
    eric-cces-diameter:
      enabled: true
    eric-cces-routingrule:
      enabled: true
    #    eric-cces-id-provider:
    #      enabled: true
  eric-nef:
    eric-nef-trafficinfluence:
      enabled: false
    eric-nef-eventexposure:
      enabled: false
    eric-nef-nidd:
      enabled: false
    eric-nef-devicetriggering:
      enabled: false
    eric-nef-bdtpnegotiation:
      enabled: false
    eric-nef-chargeableparty:
      enabled: false
    eric-nef-afsessionwithqos:
      enabled: true
    eric-nef-pfdmanagement:
      enabled: false
    eric-nef-analyticsexposure:
      enabled: false
    eric-nef-msisdnlessmosms:
      enabled: false
    eric-nef-parameterprovision:
      enabled: false
    eric-nef-serviceparameter:
      enabled: false
  istio:
    sidecar:
      inject: true
    http2_header_compression:
      enabled: true
    ingress:
      gateways:
        traffic:
          northbound:
            trusted:
              eric-cces-nef-nbi-trust-gateway:
                enabled: true
                ports:
                  https-mtls:
                    enabled: true
                    port: 443
                    protocol: HTTPS
                    hosts:
                      - "./*"
                    mode: mTLS
                    settings:
                      minProtocolVersion: TLSV1_2
                      maxProtocolVersion: TLSV1_3
                      cipherSuites: '[ECDHE-ECDSA-AES128-GCM-SHA256,ECDHE-RSA-AES128-GCM-SHA256,ECDHE-ECDSA-AES256-GCM-SHA384,ECDHE-RSA-AES256-GCM-SHA384]'
            non-trusted:
              eric-cces-nef-nbi-non-trust-gateway:
                enabled: true
                ports:
                  https-mtls:
                    enabled: true
                    port: 443
                    protocol: HTTPS
                    hosts:
                      - "./*"
                    mode: mTLS
                    settings:
                      minProtocolVersion: TLSV1_2
                      maxProtocolVersion: TLSV1_3
                      cipherSuites: '[ECDHE-ECDSA-AES128-GCM-SHA256,ECDHE-RSA-AES128-GCM-SHA256,ECDHE-ECDSA-AES256-GCM-SHA384,ECDHE-RSA-AES256-GCM-SHA384]'
          southbound:
            eric-cces-nef-sbi-gateway:
              enabled: true
              ports:
                https-mtls:
                  enabled: true
                  port: 443
                  protocol: HTTPS
                  hosts:
                    - "./*"
                  mode: mTLS
                  settings:
                    minProtocolVersion: TLSV1_2
                    maxProtocolVersion: TLSV1_3
                    cipherSuites: '[ECDHE-ECDSA-AES128-GCM-SHA256,ECDHE-RSA-AES128-GCM-SHA256,ECDHE-ECDSA-AES256-GCM-SHA384,ECDHE-RSA-AES256-GCM-SHA384]'
        provisioning:
          eric-cces-nef-provisioning-gateway:
            enabled: true
            ports:
              https-mtls:
                enabled: true
                port: 443
                protocol: HTTPS
                hosts:
                  - "./*"
                mode: mTLS
                settings:
                  minProtocolVersion: TLSV1_2
                  maxProtocolVersion: TLSV1_3
                  cipherSuites: '[ECDHE-ECDSA-AES128-GCM-SHA256,ECDHE-RSA-AES128-GCM-SHA256,ECDHE-ECDSA-AES256-GCM-SHA384,ECDHE-RSA-AES256-GCM-SHA384]'
        oam:
          eric-cces-nef-oam-gateway:
            enabled: true
            ports:
              https-tls:
                enabled: true
                port: 2443
                protocol: HTTPS
                hosts:
                  - "./*"
                mode: TLS
        heartbeat:
          nbi:
            eric-cces-nbi-heartbeat-gateway:
              #  Northbound interface heartbeat gateway related configurations for CCES liveness detection
              #  The default value of enabled field is true. Set true only when
              #      - There's a need to check whether CCES site is available with liveness detection.
              enabled: true
              ports:
                https-mtls:
                  enabled: true
                  port: 443
                  protocol: HTTPS
                  mode: mTLS # Values allowed [ TLS, mTLS ]
                  settings:
                    maxProtocolVersion: TLSV1_3
                    minProtocolVersion: TLSV1_2
                    cipherSuites: '[ECDHE-ECDSA-AES128-GCM-SHA256,ECDHE-RSA-AES128-GCM-SHA256,ECDHE-ECDSA-AES256-GCM-SHA384,ECDHE-RSA-AES256-GCM-SHA384]'
                  hosts:
                    - "./*"
            eric-cces-2nd-nbi-hb-gateway:
              #  Northbound interface heartbeat gateway related configurations for CCES liveness detection
              #  The default value of enabled field is false. Set true only when the other liveness detection request is from the second domain
              #  There's a need to check whether CCES site is available with liveness detection.
              enabled: false
              ports:
                https-mtls:
                  enabled: true
                  port: 443
                  protocol: HTTPS
                  mode: mTLS # Values allowed [ TLS, mTLS ]
                  settings:
                    maxProtocolVersion: TLSV1_3
                    minProtocolVersion: TLSV1_2
                    cipherSuites: '[ECDHE-ECDSA-AES128-GCM-SHA256,ECDHE-RSA-AES128-GCM-SHA256,ECDHE-ECDSA-AES256-GCM-SHA384,ECDHE-RSA-AES256-GCM-SHA384]'
                  hosts:
                    - "./*"
    egress:
      enabled: true
      endpoints:
        eric-cces-sbi-traffic:
          host: "*.{{ DOMAIN_3GPP_5GC }}"
          ports:
            - port: 443
              name: https-port-for-mTLS-origination
              protocol: HTTP2
              mode: mTLS
        eric-cces-gmlc-traffic:
          enabled: false
          host:
          ports:
            - port: 443
              name: https-port-for-gmlc
              protocol: HTTP2
              mode: TLS
        eric-cces-partner-portal:
          enabled: false
          host:
          ports:
            - port: 443
              name: https-port-for-mTLS-origination
              protocol: HTTP
              mode: mTLS
        eric-cces-iam:
          enabled: false
          host:
          ports:
            - port: 443 # HTTPS target destination
              name: https-port-for-mTLS-origination
              protocol: HTTP
              mode: mTLS # Values allowed [ TLS, mTLS ]
              # please do not change or remove clientCertificate, privateKey and caCertificates
              # if you have multiple ports, copy clientCertificate, privateKey and caCertificates to each of them
              clientCertificate: /etc/istio/iam-egress-certs/tls.crt
              privateKey: /etc/istio/iam-egress-certs/tls.key
              caCertificates: /etc/istio/iam-egress-ca-certs/cacert
  # Configure the policy for validating JWT.
  # Currently, two options are supported: "third-party-jwt" and "first-party-jwt".
  jwtPolicy: "third-party-jwt"
  # Unique identifier of current site.
  # The value must be unique among all CCES sites, and it should be the same with one of eric-cces-commonsvc.eric-data-wide-column-database-cd.dataCenters.name
  localSiteId: datacenter1

  #  GeographicRedundancy related configuration
  #  The default value of enabled field is false. If it is true, 2 sites are needed at least.
  #  Sites field is a list of sites, which contains id and zoneId.
  #      - The id will be mapping to the value in CM Yang model like nef:geographic-redundancy:sites:site[x]:id;
  #      - The zoneId will be mapping to the value in CM Yang model like nef:geographic-redundancy:sites:site[x]:zone-id
  #  One of the id values must be the same with that in global.localSiteId.
  geoRedundancy:
    enabled: false
  #  sites:
  #    - id: datacenter1
  #      zoneId: 1
  #    - id: datacenter2
  #      zoneId: 2
  licensing:
    # global.licensing.sites - The site information for
    sites:
      # each cNeLS instance, formatted as entries in an array like so:
      - hostname: {{ nels.host }}
#        ip:
#        priority:
  ericsson:
    licensing:
      licenseDomains:
        - productType: "CCES"
          swltId: "{{ license.swltId }}"
          customerId: "{{ license.customerId }}"
  service_routing_agent_enabled: false

eric-adp-5g-udm:
  # For asih.applicationId, should follow below constraints:
  # - The text string shall follow the pattern "(^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$)"
  # - Contains only lowercase alphanumeric characters, '-' or '.'
  # - Starts with an alphanumeric character
  # - Ends with an alphanumeric character
  # - The total length is around 1...32
#  eric-si-application-sys-info-handler:
#    asih:
#      applicationId:
  eric-pm-resource-monitor:
    resources:
      pmrm:
        requests:
          cpu: 115m
          memory: 150Mi
  eric-data-object-storage-mn:
    affinity:
      podAntiAffinity: "hard"
    persistence:
      persistentVolumeClaim:
        storageClassName: {{ storageClassName }}
    brAgent:
      enabled: false
    resources:
      kes:
        requests:
          cpu: 115m
          memory: 100Mi
        limits:
          cpu: 175m
          memory: 200Mi
  eric-lm-combined-server:
    documentDatabasePG:
      customObject:
        resources:
          persistentStorage:
            documentDatabasePGVolume:
              persistentVolumeClaim:
                storageClassName: {{ storageClassName }}
    database:
      host: eric-data-document-database-pg-lm
      name: adp_gs_lm
    resources:
      eric-lm-license-server-client:
        requests:
          memory: 1200Mi
  eric-cm-mediator:
    documentDatabasePG:
      customObject:
        resources:
          persistentStorage:
            storageClassName: {{ storageClassName }}
    resources:
      eric-cm-mediator:
        requests:
          cpu: 180m
          memory: 400Mi
      eric-cm-mediator-notifier:
        requests:
          cpu: 70m
          memory: 384Mi
  eric-data-coordinator-zk:
    persistence:
      persistentVolumeClaim:
        storageClassName: {{ storageClassName }}
        size: 500Mi
    resources:
      datacoordinatorzk:
        requests:
          cpu: 500m
      logshipper:
        requests:
          memory: 40Mi
  eric-data-message-bus-kf:
    persistence:
      persistentVolumeClaim:
        storageClassName: {{ storageClassName }}
        size: 500Mi
    resources:
      messagebuskf:
        requests:
          cpu: 1000m
          memory: 4Gi
        limits:
          cpu: 2000m
          memory: 6Gi
    configurationOverrides:
      "heap.opts": "-Xmx2G -Xms2G"
  eric-pm-bulk-reporter:
    persistentVolumeClaim:
      storageClassName: {{ storageClassName }}
    service:
      externalIPv4:
        annotations:
          sharedVIPLabel: cces-oam
          addressPoolName: cces{{ instance }}-oam
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
      externalIPv6:
        annotations:
          sharedVIPLabel: cces-oam
          addressPoolName: cces{{ instance }}-oam
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
    env:
      nodeType: CCES
    resources:
      bulkreporter:
        requests:
          cpu: 150m
          memory: 500Mi
        limits:
          cpu: 300m
          memory: 850Mi
      alarmreporter:
        requests:
          cpu: 50m
        limits:
          cpu: 100m
      pmsftp:
        requests:
          cpu: 100m
          memory: 200Mi
        limits:
          cpu: 500m
          memory: 300Mi
  eric-data-search-engine:
    index_management:
      delete_indices_by_diskspace:
        - index: adp-app-debug-logs-*
          size: 4gb
        - index: adp-app-logs-*
          size: 8gb
      policies:
        - description: "Remove app debug logs older than 3 days"
          indices:
            - adp-app-debug-logs-*
          priority: 1
          states:
            - name: init
              transitions:
                - condition: min_index_age=3d
                  destination_state: delete
            - name: delete
              actions:
                - delete
        - description: "Remove app logs older than 15 days"
          indices:
            - adp-app-logs-*
          priority: 1
          states:
            - name: init
              transitions:
                - condition: min_index_age=15d
                  destination_state: delete
            - name: delete
              actions:
                - delete
        - description: "Remove app audit logs older than 30 days"
          indices:
            - adp-app-audit-logs-*
          priority: 1
          states:
            - name: init
              transitions:
                - condition: min_index_age=30d
                  destination_state: delete
            - name: delete
              actions:
                - delete
        - description: "Remove alarm logs older than 30 days"
          indices:
            - adp-app-asi-logs-*
          priority: 1
          states:
            - name: init
              transitions:
                - condition: min_index_age=30d
                  destination_state: delete
            - name: delete
              actions:
                - delete
        - description: "Remove security logs older than 30 days"
          indices:
            - adp-app-security-logs-*
          priority: 1
          states:
            - name: init
              transitions:
                - condition: min_index_age=30d
                  destination_state: delete
            - name: delete
              actions:
                - delete
        - description: "Remove transaction logs older than 24 hours"
          indices:
            - eric-cces-transactionlog-*
          priority: 1
          states:
            - name: init
              transitions:
                - condition: min_index_age=24h
                  destination_state: delete
            - name: delete
              actions:
                - delete
    persistence:
      data:
        persistentVolumeClaim:
          storageClassName: {{ storageClassName }}
          size: 15Gi
      master:
        persistentVolumeClaim:
          storageClassName: {{ storageClassName }}
    resources:
      master:
        requests:
          cpu: 200m
      ingest:
        requests:
          cpu: 200m
          memory: 4Gi
        limits:
          memory: 4Gi
      data:
        requests:
          cpu: 3500m
          memory: 6Gi
        limits:
          cpu: 3500m
          memory: 6Gi
      metrics:
        requests:
          memory: 100Mi
    replicaCount:
      data: 2
      ingest: 1
    jvmHeap:
      data: 3072m
      ingest: 2048m
  eric-data-distributed-coordinator-ed:
    persistence:
      persistentVolumeClaim:
        storageClassName: {{ storageClassName }}
        enabled: true
      brAgent:
        backupVolume:
          storageClassName: {{ storageClassName }}
    resources:
      brAgent:
        requests:
          cpu: 100m
          memory: 600Mi
      metricsexporter:
        requests:
          memory: 70Mi
        limits:
          memory: 70Mi
  eric-pm-server:
    rbac:
      appMonitoring:
        {% if caas == 'OpenShift' %}
        enabled: false
        {% else %}
        enabled: true
        {% endif %}
        federation:
          jobOverride: true
          jobConfiguration: |
            - job_name: 'federate-victoria'
              scrape_interval: 1m
              honor_labels: true
              metrics_path: '/select/0/prometheus/federate'
              params:
                'match[]':
                  - '{job="kubernetes-nodes",namespace="{{ vnflcm.namespace }}"}'
                  - '{job="kubernetes-nodes-cadvisor",namespace="{{ vnflcm.namespace }}"}'
              static_configs:
                - targets:
                  - 'eric-victoria-metrics-cluster-vmselect.monitoring:8481'
    server:
      #set server.tsdb.retention.size to 85% of persistentVolume.size
      tsdb:
        retention:
          time: "3d"
          size: "17GB"
      persistentVolume:
        storageClass: {{ storageClassName }}
    resources:
      eric-pm-server:
        requests:
          cpu: 1500m
          memory: 10Gi
        limits:
          cpu: 3
          memory: 20Gi
      eric-pm-configmap-reload:
        requests:
          cpu: 20m
          memory: 50Mi
        limits:
          cpu: 100m
          memory: 100Mi
      eric-pm-exporter:
        requests:
          memory: 50Mi
        limits:
          memory: 100Mi
      eric-pm-reverseproxy:
        requests:
          cpu: 700m
          memory: 100Mi
  eric-ctrl-bro:
    persistence:
      persistentVolumeClaim:
        storageClassName: {{ storageClassName }}
        size: 50Gi
    resources:
      backupAndRestore:
        requests:
          cpu: 350m
          memory: 3000Mi
  eric-sec-key-management:
    resources:
      vault:
        requests:
          cpu: 300m
      metrics:
        requests:
          memory: 50Mi
        limits:
          memory: 100Mi
    ## tolerations, node tolerations for the pod(s)
    #tolerations:
    #  kms: []
    #  bootstrapJob: []
    #  hooklauncher: []
  eric-sec-ldap-server:
    brAgent:
      enabled: true
    persistentVolumeClaim:
      storageClassName: {{ storageClassName }}
    resources:
      ldap:
        requests:
          cpu: 100m
          memory: 500Mi
        limits:
          memory: 2Gi
      ldapagent:
        requests:
          cpu: 200m
          memory: 500Mi
        limits:
          memory: 2Gi
  eric-cm-yang-provider:
    externalTls:
      netconf:
        enabled: false
    service:
      externalIPv4:
        annotations:
          sharedVIPLabel: cces-oam
          addressPoolName: cces{{ instance }}-oam
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
      externalIPv6:
        annotations:
          sharedVIPLabel: cces-oam
          addressPoolName: cces{{ instance }}-oam
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
    resources:
      yangEngine:
        requests:
          cpu: 200m
          memory: 250Mi
      yangDbAdapter:
        requests:
          cpu: 20m
          memory: 150Mi
      notificationController:
        requests:
          memory: 75Mi
      sshd:
        requests:
          cpu: 10m
          memory: 100Mi
      schemaSynchronizer:
        requests:
          cpu: 10m
  eric-fh-snmp-alarm-provider:
    # SNMP protocol releted values - begin, MR: Support for new SNMP_v2c varbinds
    # Possible values are 0(Unknown), 1(IPV4), 2(IPV6)
    sourceIdentifierType: 1
    # Should be in IPv4 or IPv6 format, depends on SourceIdentifierType
    sourceIdentifier: {{ snmp.sourceIdentifier }}
    # SNMP protocol releted values - end
    service:
      externalIPv4:
        annotations:
          sharedVIPLabel: cces-oam
          addressPoolName: cces{{ instance }}-oam
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
      externalIPv6:
        annotations:
          sharedVIPLabel: cces-oam
          addressPoolName: cces{{ instance }}-oam
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
    resources:
      alarmprovider:
        requests:
          cpu: 50m
          memory: 1000Mi
  eric-cnom-server:
    fqdn: "{{ cnom.fqdn }}"
    resources:
      server:
        requests:
          cpu: 50m
          memory: 450Mi
        limits:
          memory: 450Mi
  eric-tm-ingress-controller-cr:
    service:
      externalIPv4:
        annotations:
          sharedVIPLabel: cces-oam
          addressPoolName: cces{{ instance }}-oam
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
      externalIPv6:
        annotations:
          sharedVIPLabel: cces-oam
          addressPoolName: cces{{ instance }}-oam
          #cloudProviderLB:
            ##list of cloud provider annotations. Example AWS annotation
           #service.beta.kubernetes.io/aws-load-balancer-type: "external"
    {% if caas == 'OpenShift' %}
    # According ADP Service User Guide
    resources:
      contour:
        limits:
          cpu: 150m
          memory: 1000Mi
      envoy:
        limits:
          cpu: "2"
          memory: 600Mi
    {% else %}
    resources:
      envoy:
        limits:
          memory: "600Mi"
        requests:
          memory: "500Mi"
    {% endif %}
  eric-log-shipper:
    resources:
      logshipper:
        requests:
          cpu: 400m
          memory: 2Gi
        limits:
          cpu: 500m
          memory: 2Gi
    {% if caas == 'OpenShift' %}
    rbac:
      automountServiceAccountToken: true
      createClusterRole: true
      createClusterRoleBinding: true
    logshipper:
      privileged: true
      cfgData: ""
      autodiscover:
        enabled: true
        namespace: ".RELEASE.NAMESPACE"
        logplane: adp-app-logs
        paths:
          - /var/log/pods/${data.kubernetes.namespace}_${data.kubernetes.pod.name}_${data.kubernetes.pod.uid}/**/*.log
        useContainerInput: true
    additionalVolumes: |
      - name: crio-containers
        hostPath:
          path: /var/log/containers
      - name: kubernetes-containers
        hostPath:
          path: /var/log/pods
    additionalVolumeMounts: |
      - name: crio-containers
        mountPath: /var/log/containers
        readOnly: true
      - name: kubernetes-containers
        mountPath: /var/log/pods
        readOnly: true
    {% endif %}
  eric-log-transformer:
#    searchengine:
#      exclusion:
#      - logplane: "eric-cces-transactionlog"
#        rules:
#          - field: "[metadata][groups]"
#            contains: "Success"
    replicaCount: 2
    resources:
      logtransformer:
        requests:
          cpu: 2000m
          memory: 8Gi
        limits:
          cpu: 2000m
          memory: 8Gi
      metrics:
        requests:
          memory: 200Mi
    egress:
      syslog:
        enabled: false
        tls:
          enabled: true
        certificates:
          asymmetricKeyCertificateName: eric-log-transformer-client-key-certificate
          trustedCertificateListName: eric-log-transformer-cacerts
        remoteHosts:
        #  - host: hostname
        #    port: 514
        #inclusions:
        #  - field: "[facility]"
        #    value: "log audit"
        #exclusions:
        #  - logplane:
        #    rules:
        #      - field: "[field1]"
        #        value: "value1"
        #      - field: "[field2]"
        #        value: "value2"
        filter: #|
  eric-fh-alarm-handler:
    documentDatabasePG:
      customObject:
        resources:
          persistentStorage:
            documentDatabasePGVolume:
              persistentVolumeClaim:
                storageClassName: {{ storageClassName }}
    resources:
      alarmhandler:
        requests:
          cpu: 50m
          memory: 375Mi
        limits:
          memory: 500Mi
    backend:
      hostname: "eric-data-document-database-pg-ah"
      dbname: adp_gs_ah
  eric-odca-diagnostic-data-collector:
    resources:
      diagnostic-data-collector:
        requests:
          cpu: 900m
          memory: 1000Mi
          ephemeral-storage: 15Gi
        limits:
          cpu: 1200m
          memory: 1200Mi
          ephemeral-storage: 25Gi
      diagnostic-data-collector-manual:
        requests:
          cpu: 900m
          memory: 1000Mi
          ephemeral-storage: 15Gi
        limits:
          cpu: 1200m
          memory: 1200Mi
          ephemeral-storage: 25Gi
  eric-sec-sip-tls:
    resources:
      sip-tls:
        requests:
          cpu: 145m
      sip-tls-supervisor:
        requests:
          cpu: 185m
  eric-sec-access-mgmt:
    documentDatabasePG:
      customObject:
        resources:
          persistentStorage:
            documentDatabasePGVolume:
              persistentVolumeClaim:
                storageClassName: {{ storageClassName }}
    persistence:
      dbName: adp_gs_iam
      dbHost: "eric-data-document-database-pg-iam"
    tls:
      client:
        pg:
          #Enable below for DDB split
          issuer: eric-data-document-database-pg-iam-client-ca
    ingress:
      hostname: "{{ cces.iamFqdn }}"
    authenticationProxy:
      cookieDomain: "{{ cces.iamDomain }}"
      ingress:
        hostname: "iam-authn.{{ cces.iamDomain }}"
    resources:
      iam:
        requests:
          memory: 1500Mi
      sipoauth2:
        requests:
          memory: 100Mi
        limits:
          memory: 200Mi
  eric-sec-admin-user-management:
    ## tolerations, node tolerations for the pod(s)
    #tolerations:
    #  aum: []
    #  hooklauncher: []
  eric-probe-virtual-tap-broker:
    dtls:
      enabled: true
    replicaCount: 2
    resources:
      VirtualTapBroker:
        limits:
          cpu: 3500m
        requests:
          cpu: 2000m
eric-cces-commonsvc:
  eric-data-wide-column-database-cd:
    podPriority:
      cassandra:
        priorityClassName: ""
    replicaCount: {{ replicaCount['eric-data-wide-column-database-cd'] }} # default(5)
    persistence:
      dataVolume:
        persistentVolumeClaim:
          size: 30Gi
          storageClassName: {{ storageClassName }}
    brAgent:
      enabled: true
    cassandra:
      jvmOptions:
        set:
          - "-Djdk.tls.acknowledgeCloseNotify=true"
          - "-XX:MaxDirectMemorySize=1500M"
          - "-XX:+PrintSafepointStatistics"
          - "-XX:PrintSafepointStatisticsCount=1"
          - "-XX:+SafepointTimeout"
          - "-XX:SafepointTimeoutDelay=1000"
          - "-Xmn768M"
     #List of remote seed nodes. Specified by IP address or hostname.
     #E.g:
#    - 10.40.0.1
#    - 10.40.0.2
#      remoteSeedNodes:
#        - VIP0
#        - VIP1
#    service:
#      annotations:
#        cloudProviderLB:
#          #list of cloud provider annotations. Example AWS annotation
#          service.beta.kubernetes.io/aws-load-balancer-type: "external"
#      # Service setting to enable or disable external service exposed over IPv4.
#      externalIPv4:
#      # enabled can be true or false. In Geo-Red deployment, the value need to match the global.internalIPFamily parameter.
#        enabled: false
#      # Service setting to enable or disable external service exposed over IPv6.
#      externalIPv6:
#      # enabled can be true or false. In Geo-Red deployment, the value need to match the global.internalIPFamily parameter.
#        enabled: true
#      #Service desired route for external traffic via node-local (Local) or cluster-wide (Cluster) endpoints.
#      #Supported values are Local or Cluster, default is set to Local.
#      externalTrafficPolicy: Local
#      certificates:
        # A name referring to a key/certificate created through the Certificate Manager.
#        asymmetricKeyCertificateName: eric-data-wide-column-database-cd-external-cql-server-cert-key/eric-data-wide-column-database-cd-external-cql-server-cert-key-cert
        # A name referring to a list of trusted certificates (CAs) created through the Certificate Manager.
#        trustedCertificateListName: eric-data-wide-column-database-cd-external-cql-server-ca
    dataCenters:
      # Name of the DC as represented in the cassandra-rackdc.properties file. This name must be unique among all CCES sites, including remote DCs.
      - name: "datacenter1"
#        service:
#          externalIPv4:
#            annotations:      # Specific address pool name configured using External Connectivity FrontEnd service.
#              addressPoolName: cces-5g-wcdb-data-sync
#              addressPoolName:
#          externalIPv6:
#            annotations:      # Specific address pool name configured using External Connectivity FrontEnd service.
#              addressPoolName: cces-5g-wcdb-data-sync
#              addressPoolName:
    # External traffic encryption.
#    egress:
      # CQL client interface.
#      certificates:
        # A name referring to a key/certificate created through the Certificate Manager.
#        asymmetricKeyCertificateName: eric-data-wide-column-database-cd-external-cql-client-cert-key/eric-data-wide-column-database-cd-external-cql-client-cert-key-cert
        # A name referring to a list of trusted certificates (CAs) created through the Certificate Manager.
#        trustedCertificateListName: eric-data-wide-column-database-cd-external-cql-client-ca

    # Replication traffic encryption.
#    georeplication:
      # Internode interface.
#      certificates:
        # A name referring to a key/certificate created through the Certificate Manager.
#        asymmetricKeyCertificateName: eric-data-wide-column-database-cd-external-internode-server-cert-key/eric-data-wide-column-database-cd-external-internode-server-cert-key-cert
        # A name referring to a list of trusted certificates (CAs) created through the Certificate Manager.
#        trustedCertificateListName: eric-data-wide-column-database-cd-external-internode-server-ca
    resources:
      cassandra:
        requests:
          cpu: "7"
          memory: 8500Mi
        limits:
          cpu: "8"
          memory: 8500Mi
        jvm:
          initialMemoryAllocationPercentage: 50
          largeMemoryAllocationMaxPercentage: 50
      brsc:
        requests:
          cpu: 250m
          memory: 500Mi
        limits:
          memory: 1Gi
      bra:
        requests:
          memory: 800Mi
          cpu: 200m
          ephemeral-storage: "1.5Gi"
        limits:
          memory: 800Mi
          ephemeral-storage: "2.25Gi"
      operator:
        requests:
          memory: 150Mi
        limits:
          memory: 250Mi
  eric-stm-diameter:
    enabled: true
    initialConfig:
      dsl:
        enableIPv6: false
      sctp:
        enable: false
    resources:
      diameter:
        requests:
          cpu: "1.3"
          memory: 200Mi
        limits:
          cpu: "4"
          memory: 4Gi
      dsl:
        requests:
          memory: 200Mi
          cpu: "0.45"
      sctp:
        requests:
          cpu: "0.85"
  eric-stm-diameter-proxy-grpc:
    enabled: true
    initialConfig:
      dsl:
        enableIPv6: false
    resources:
      diameterproxygrpc:
        requests:
          cpu: "1"
          memory: 500Mi
        limits:
          cpu: "4"
          memory: 4Gi
      dsl:
        requests:
          cpu: "0.45"
          memory: 200Mi
  eric-slt-dsl:
    enabled: true
    initialConfig:
      dsl:
        enableIPv6: false
    resources:
      dsl:
        requests:
          memory: 200Mi
  eric-cces-common-entity:
    replicaCount: {{ replicaCount['eric-cces-common-entity'] }} # default(4)
    minReplicas: {{ hpaReplica['eric-cces-common-entity'].min }} # default(4)
    maxReplicas: {{ hpaReplica['eric-cces-common-entity'].max }} # default(5)
    resources:
      ces:
        requests:
          cpu: 500m
          memory: 1Gi
        limits:
          cpu: 750m
          memory: 1Gi
  eric-cces-timer-service:
    replicaCount: {{ replicaCount['eric-cces-timer-service'] }} # default(6)
    autoScaling:
      minReplicas: {{ hpaReplica['eric-cces-timer-service'].min }} # default(6)
      maxReplicas: {{ hpaReplica['eric-cces-timer-service'].max }} # default(7)
    resources:
      timerservice:
        requests:
          cpu: 800m
          memory: 200Mi
        limits:
          memory: 250Mi
  eric-cces-redis-operator:
    resources:
      redisOperator:
        requests:
          cpu: 1000m
          memory: 256Mi
        limits:
          cpu: 1000m
  eric-cces-redis-cluster:
    hpa:
      maxNumberOfMaster: {{ hpaReplica['eric-cces-redis-cluster'].max }}
    resources:
      redisCluster:
        requests:
          cpu: 700m
        limits:
          cpu: "1"
      istio:
        requests:
          cpu: 1300m
          memory: 1Gi
        limits:
          cpu: 2000m
          memory: 2Gi
  eric-cces-license-handler:
    #change the mode for nef
    mode: nef
  eric-cces-cm-manager:
    resources:
      cmmanager:
        requests:
          cpu: 150m
          memory: 200Mi
        limits:
          cpu: 200m
          memory: 500Mi
  eric-cces-extension-manager:
    documentDatabasePG:
      customObject:
        resource:
          persistentVolumeClaim:
            storageClassName: {{ storageClassName }}
    resources:
      extensionmanager:
        requests:
          cpu: 200m
      istio:
        requests:
          cpu: 300m
  eric-cces-charging-adf:
    replicaCount: 2
  eric-cces-charging-message-bus:
    persistence:
      persistentVolumeClaim:
        storageClassName: {{ storageClassName }}
        size: 74Gi
    resources:
      messagebuskf:
        requests:
          cpu: 3000m
          memory: 6Gi
        limits:
          cpu: 4500m
          memory: 6Gi
    jmx:
      enabled: false
    configurationOverrides:
      "heap.opts": "-Xmx2G -Xms2G"
      log.retention.bytes: "301482844"
      log.retention.hours: 8
eric-nef:
  eric-nef-analyticsexposure:
    replicaCount: 2
    autoScaling:
      minReplicas: 2
      maxReplicas: 3
  eric-nef-afsessionwithqos:
    autoScaling:
      maxReplicas: 3
    resources:
      qos:
        requests:
          cpu: 800m
        limits:
          cpu: 1200m
  eric-nef-afsessionwithqos-provisioning:
    autoScaling:
      maxReplicas: 3
  eric-nef-pfdmanagement:
    autoScaling:
      maxReplicas: 3
    config:
      storage: udr
  eric-nef-pfdmanagement-provisioning:
    autoScaling:
      maxReplicas: 3
  eric-nef-bdtpnegotiation:
    autoScaling:
      maxReplicas: 3
    resources:
      bdt:
        requests:
          cpu: 400m
        limits:
          cpu: 600m
  eric-nef-trafficinfluence:
    autoScaling:
      maxReplicas: 3
    resources:
      trafficinfluence:
        requests:
          cpu: 700m
        limits:
          cpu: 1050m
  eric-nef-chargeableparty:
    autoScaling:
      maxReplicas: 3
    resources:
      cp:
        requests:
          cpu: 700m
        limits:
          cpu: 1050m
  eric-nef-eventexposure:
    autoScaling:
      maxReplicas: 3
    resources:
      monte:
        requests:
          cpu: 850m
          memory: 2300Mi
        limits:
          cpu: 1275m
          memory: 3Gi
    #scefIdMapping:
    # List of scefId and numericalScefId in Event Exposure, numericalScefId is the internal index of scefId. The numericalScefId of the first site must be set to 0.
    # The numericalScefId of the other sites must be set in Geo-Red.
    #- scefId: "scefId.ericsson.se"
    #  numericalScefId: 0
    #- scefId: "scefId1.ericsson.se"
    #  numericalScefId: 1
    #- scefId: "scefId2.ericsson.se"
    #  numericalScefId: 2
  eric-nef-nidd:
    autoScaling:
      maxReplicas: 6
    resources:
      nidd:
        requests:
          cpu: 1500m
          memory: 4Gi
        limits:
          cpu: 2250m
  eric-nef-devicetriggering:
    autoScaling:
      maxReplicas: 3
    resources:
      devicetriggering:
        requests:
          cpu: 600m
          memory: 1500Mi
        limits:
          cpu: 900m
  eric-nef-msisdnlessmosms:
    autoScaling:
      maxReplicas: 3
  eric-nef-parameterprovision:
    replicaCount: 2
    autoScaling:
      minReplicas: 2
      maxReplicas: 3
  eric-nef-serviceparameter:
    autoScaling:
      sp:
        maxReplicas: 3
    resources:
      sp:
        limits:
          cpu: 750m
          memory: 2500Mi
        requests:
          cpu: 500m
          memory: 2000Mi
# The following commented config.osd.afInfluencePolicyDataSetProfile is part of eric-nef-serviceparameter and shall be uncommented and configured if POLICY OSD feature is enabled. Please refer to Deploying the CCES for details.
#    config:
#      osd:
#        afInfluencePolicyDataSetProfile:
#          {
#            "key1": {
#              "type": "object",
#              "properties": {
#                "property1": {
#                  "type": "string"
#                },
#                "property2": {
#                  "type": "object",
#                  "properties": {
#                    "property1": {
#                      "type": "string"
#                    },
#                    "property2": {
#                      "type": "string"
#                    }
#                  }
#                }
#              }
#            },
#            "key2": {
#              "type": "object",
#              "properties": {
#                "property1": {
#                  "type": "string"
#                },
#                "property2": {
#                  "type": "object",
#                  "properties": {
#                    "property1": {
#                      "type": "string"
#                    },
#                    "property2": {
#                      "type": "string"
#                    }
#                  }
#                }
#              }
#            }
#          }
  eric-nef-serviceparameter-provisioning:
    autoScaling:
      maxReplicas: 3
eric-apigm:
  eric-apigm-api-admin:
    resources:
      api-admin:
        requests:
          cpu: 500m
  eric-apigm-api-proxy:
    replicaCount: {{ replicaCount['eric-apigm-api-proxy'] }} # default(5)
    minReplicas: {{ hpaReplica['eric-apigm-api-proxy'].min }} # default(5)
    maxReplicas: {{ hpaReplica['eric-apigm-api-proxy'].max }} # default(6)
    log:
      streamingMethod: null
      transaction:
        # This is leave null on purpose to allow global parameter to take effect
        # If global parameter not set, and service parameter is null, transaction log will not enabled
        enabled:
    resources:
      api-proxy:
        requests:
          cpu: 2000m
          memory: 5Gi
        limits:
          memory: 5Gi
        jvm:
          largeMemoryAllocationMaxPercentage: 56
          initialMemoryAllocationPercentage: 56
  eric-apigm-admin-portal:
    env:
      pwdQuality:
        maxConsecutiveCharactersPerClass: 4
        minOther: 2
        minUpper: 1
        minLower: 1
        minDigit: 2
        minLength: 8
  eric-apigm-oauthserver:
    clientRegistry:
      tokenTtlInSecond: 7200
  eric-apigm-partner-mgmt:
    env:
      partner:
        portal:
          notification:
            path: /

eric-nrfagent:
  eric-nrf-discovery-agent:
    resources:
      cpu: 520m
    proxy:
      resources:
        requests:
          cpu: 520m
  eric-nrf-notify-agent:
    resources:
      cpu: 100m
    proxy:
      resources:
        requests:
          memory: 256Mi
        limits:
          cpu: 2000m
          memory: 1Gi
  eric-nrf-register-agent:
    resources:
      cpu: 50m
    elector:
      resources:
        limits:
          cpu: 200m

eric-ngac:
  eric-ngac-apiservice-runtime:
    env:
      datasources:
        - name: default
          type: cassandra
          ttl: 86400
          keyspace: ngac_api_service_key_value_storage
          geoRedEnabled: false
        - name: geored_default
          type: cassandra
          ttl: 86400
          keyspace: ngac_api_service_key_value_storage_geored
          geoRedEnabled: true
    overload:
      api:
        rejectStrategy: perPod
